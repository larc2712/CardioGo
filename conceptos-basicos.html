<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CardioGo — Conceptos Básicos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- Eliminar cualquier navbar duplicada de estilo antiguo -->
<!--
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm rounded-3 mt-2 mb-4 mx-3 px-3">
    <a class="navbar-brand fw-bold" href="index.html">CardioGo</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
            aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="conceptos-basicos.html">Conceptos Básicos</a></li>
            <li class="nav-item"><a class="nav-link" href="lectura-guiada.html">Lectura Guiada</a></li>
            <li class="nav-item"><a class="nav-link" href="comparacion-patrones.html">Comparación de Patrones</a></li>
        </ul>
    </div>
</nav>
-->

<!-- Eliminar cualquier hero duplicado si existiera -->
<!--
<section class="jumbotron ...">
    ... hero duplicado ...
</section>
-->

<nav class="navbar navbar-expand-lg ao-topbar">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="index.html">CardioGo</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarConceptos"
                aria-controls="navbarConceptos" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navbarConceptos" class="collapse navbar-collapse">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link active" href="conceptos-basicos.html">Conceptos Básicos</a></li>
                <li class="nav-item"><a class="nav-link" href="lectura-guiada.html">Lectura Guiada</a></li>
                <li class="nav-item"><a class="nav-link" href="comparacion-patrones.html">Comparación de Patrones</a></li>
            </ul>
        </div>
    </div>
</nav>

<main class="container my-4">
    <section class="ao-hero mb-4">
        <h1 class="ao-hero-title display-6">Conceptos Básicos de ECG</h1>
        <p class="ao-hero-subtitle lead">Contenido textual y paneles interactivos unificados.</p>
    </section>

    <section class="ao-content">
        <div class="accordion" id="accordionConceptos">
            <!-- Sistema de conducción cardíaca -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingConduccion">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseConduccion" aria-expanded="true" aria-controls="collapseConduccion">
                        Sistema de conducción cardíaca
                    </button>
                </h2>
                <div id="collapseConduccion" class="accordion-collapse collapse show" aria-labelledby="headingConduccion" data-bs-parent="#accordionConceptos">
                    <div class="accordion-body">
                        <p>
                            El sistema de conducción cardíaca coordina la despolarización para producir un latido eficaz. Componentes principales:
                        </p>
                        <ul>
                            <li>Nodo SA (sinusal): marcapasos fisiológico.</li>
                            <li>Vías internodales y haz de Bachmann.</li>
                            <li>Nodo AV: retraso fisiológico para llenar ventrículos.</li>
                            <li>Haz de His, ramas derecha e izquierda.</li>
                            <li>Red de Purkinje.</li>
                        </ul>
                        <p class="mb-0">
                            Secuencia: inicio en nodo SA → aurículas → nodo AV (pausa) → His → ramas → Purkinje → ventrículos. Alteraciones generan arritmias o trastornos de conducción.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Papel electrocardiográfico -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingPapel">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePapel" aria-expanded="false" aria-controls="collapsePapel">
                        Papel electrocardiográfico
                    </button>
                </h2>
                <div id="collapsePapel" class="accordion-collapse collapse" aria-labelledby="headingPapel" data-bs-parent="#accordionConceptos">
                    <div class="accordion-body">
                        <p>
                            El papel de ECG tiene cuadrícula: cada cuadro pequeño (1 mm) equivale a 0.04 s y 0.1 mV a 25 mm/s y 10 mm/mV. Un cuadro grande (5 mm) equivale a 0.20 s y 0.5 mV.
                        </p>
                        <ul>
                            <li>Velocidad estándar: 25 mm/s (alternativa: 50 mm/s).</li>
                            <li>Ganancia estándar: 10 mm/mV.</li>
                            <li>Medición de intervalos: cuenta cuadros y multiplica por equivalencias.</li>
                        </ul>
                        <p class="mb-0">
                            Usando estas equivalencias puedes medir PR, QRS, QT y calcular FC a partir de cuadros.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Derivaciones -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingDerivaciones">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDerivaciones" aria-expanded="false" aria-controls="collapseDerivaciones">
                        Derivaciones
                    </button>
                </h2>
                <div id="collapseDerivaciones" class="accordion-collapse collapse" aria-labelledby="headingDerivaciones" data-bs-parent="#accordionConceptos">
                    <div class="accordion-body">
                        <p>
                            Las derivaciones son “miradas” del corazón en diferentes planos:
                        </p>
                        <ul>
                            <li>Plano frontal: DI, DII, DIII; aVR, aVL, aVF.</li>
                            <li>Plano horizontal (precordiales): V1–V6.</li>
                        </ul>
                        <p>
                            Correlaciones aproximadas:
                        </p>
                        <ul>
                            <li>Septal: V1–V2.</li>
                            <li>Anterior: V3–V4.</li>
                            <li>Lateral: DI, aVL, V5–V6.</li>
                            <li>Inferior: DII, DIII, aVF.</li>
                        </ul>
                        <p class="mb-0">
                            La lectura territorial ayuda a localizar isquemia, necrosis o bloqueos específicos.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Frecuencia cardíaca -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingFC">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFC" aria-expanded="false" aria-controls="collapseFC">
                        Frecuencia cardíaca (FC)
                    </button>
                </h2>
                <div id="collapseFC" class="accordion-collapse collapse" aria-labelledby="headingFC" data-bs-parent="#accordionConceptos">
                    <div class="accordion-body">
                        <p>Métodos comunes para calcular la FC:</p>
                        <ul>
                            <li>Método 1500: FC ≈ 1500 / cuadros pequeños entre dos R.</li>
                            <li>Método 300: FC ≈ 300 / cuadros grandes entre dos R.</li>
                            <li>Método 6 segundos: cuenta latidos en 30 cuadros grandes y multiplica por 10.</li>
                        </ul>
                        <p class="mb-0">
                            Referencias: bradicardia &lt; 60 lpm; normal 60–100 lpm; taquicardia &gt; 100 lpm (en adultos).
                        </p>
                    </div>
                </div>
            </div>

            <!-- Intervalos normales -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingIntervalos">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseIntervalos" aria-expanded="false" aria-controls="collapseIntervalos">
                        Intervalos normales
                    </button>
                </h2>
                <div id="collapseIntervalos" class="accordion-collapse collapse" aria-labelledby="headingIntervalos" data-bs-parent="#accordionConceptos">
                    <div class="accordion-body">
                        <ul>
                            <li>PR: 120–200 ms.</li>
                            <li>QRS: &lt; 120 ms.</li>
                            <li>QT: depende de la FC; usar QTc (Bazett: QTc ≈ QT / √RR).</li>
                        </ul>
                        <p class="mb-0">
                            PR prolongado sugiere bloqueo AV; QRS ancho sugiere bloqueos de rama o ritmos ventriculares; alteraciones de QTc pueden asociarse a riesgo de arritmias.
                        </p>
                    </div>
                </div>
            </div>

            <!-- NUEVO: Cálculo del eje del QRS -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingEjeQRS">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEjeQRS" aria-expanded="false" aria-controls="collapseEjeQRS">
                        Cálculo del eje del QRS
                    </button>
                </h2>
                <div id="collapseEjeQRS" class="accordion-collapse collapse" aria-labelledby="headingEjeQRS" data-bs-parent="#accordionConceptos">
                    <div class="accordion-body">
                        <p class="mb-3">
                            El eje del QRS representa la dirección promedio de la despolarización ventricular. Puedes estimarlo con la deflexión neta (R−S) en DI y aVF:
                        </p>
                        <ul>
                            <li>Deflexión en mm: positiva si el QRS es mayormente hacia arriba; negativa si hacia abajo.</li>
                            <li>Ángulo aproximado: atan2(aVF, DI) en grados, normalizado a −180°…+180°.</li>
                            <li>Rangos: Normal (−30° a +90°), Desviación izquierda (−30° a −90°), Desviación derecha (&gt; +90°), Eje extremo (&lt; −90°).</li>
                        </ul>

                        <div class="row g-3 mt-3">
                            <div class="col-md-6">
                                <label class="form-label" for="ejeDI">Deflexión neta en DI (mm, R−S)</label>
                                <input type="number" id="ejeDI" class="form-control" placeholder="Ej.: 8">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" for="ejeAVF">Deflexión neta en aVF (mm, R−S)</label>
                                <input type="number" id="ejeAVF" class="form-control" placeholder="Ej.: 3">
                            </div>
                        </div>

                        <div class="mt-3 d-flex gap-2">
                            <button class="btn btn-primary" id="btnCalcularEje">Calcular eje</button>
                            <button class="btn btn-outline-secondary" id="btnLimpiarEje">Limpiar</button>
                        </div>

                        <div id="resultadoEje" class="alert alert-info mt-3 d-none"></div>
                    </div>
                </div>
            </div>

            <!-- NUEVO: Evaluación de ondas P, QRS y T -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOndas">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOndas" aria-expanded="false" aria-controls="collapseOndas">
                        Evaluación de ondas P, QRS y T
                    </button>
                </h2>
                <div id="collapseOndas" class="accordion-collapse collapse" aria-labelledby="headingOndas" data-bs-parent="#accordionConceptos">
                    <div class="accordion-body">
                        <p class="mb-2">Guía práctica y referencias para ondas del ECG:</p>
                        <ul class="mb-3">
                            <li>Onda P: duración &lt; 120 ms, amplitud &lt; 2.5 mm; morfología variable.</li>
                            <li>QRS: duración &lt; 120 ms (estrecho); ≥ 120 ms (ancho). Considera bloqueos de rama.</li>
                            <li>Onda T: usualmente positiva en DI, DII y V3–V6; asimétrica. Inversiones sugieren isquemia u otras causas.</li>
                        </ul>

                        <div class="row g-4 mt-2">
                            <div class="col-md-4">
                                <div class="card shadow-sm rounded-3">
                                    <div class="card-header">Onda P</div>
                                    <div class="card-body">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" id="pPresente">
                                            <label class="form-check-label" for="pPresente">P visible</label>
                                        </div>
                                        <div class="mb-2">
                                            <label class="form-label" for="pDuracion">Duración (ms)</label>
                                            <input type="number" id="pDuracion" class="form-control" placeholder="Ej.: 100">
                                        </div>
                                        <div class="mb-2">
                                            <label class="form-label" for="pAmplitud">Amplitud (mm)</label>
                                            <input type="number" id="pAmplitud" class="form-control" placeholder="Ej.: 2">
                                        </div>
                                        <small class="text-muted">Referencia: &lt; 120 ms y &lt; 2.5 mm.</small>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="card shadow-sm rounded-3">
                                    <div class="card-header">Complejo QRS</div>
                                    <div class="card-body">
                                        <div class="mb-2">
                                            <label class="form-label" for="qrsDuracion">Duración (ms)</label>
                                            <input type="number" id="qrsDuracion" class="form-control" placeholder="Ej.: 90">
                                        </div>
                                        <div class="mb-2">
                                            <label class="form-label">Morfología</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="rbbb">
                                                <label class="form-check-label" for="rbbb">BRD (RBBB)</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="lbbb">
                                                <label class="form-check-label" for="lbbb">BCRI (LBBB)</label>
                                            </div>
                                        </div>
                                        <small class="text-muted">Referencia: QRS &lt; 120 ms.</small>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="card shadow-sm rounded-3">
                                    <div class="card-header">Onda T</div>
                                    <div class="card-body">
                                        <div class="mb-2">
                                            <label class="form-label" for="tPolaridad">Polaridad</label>
                                            <select id="tPolaridad" class="form-select">
                                                <option value="positiva" selected>Positiva</option>
                                                <option value="negativa">Negativa</option>
                                                <option value="plana">Plana/isoelectrica</option>
                                            </select>
                                        </div>
                                        <div class="mb-2">
                                            <label class="form-label" for="tSimetria">Simetría</label>
                                            <select id="tSimetria" class="form-select">
                                                <option value="asimetrica" selected>Asimétrica (normal)</option>
                                                <option value="simetrica">Simétrica</option>
                                            </select>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" id="tInvertida">
                                            <label class="form-check-label" for="tInvertida">Invertida donde debería ser positiva</label>
                                        </div>
                                        <small class="text-muted">T suele ser positiva en DI, DII, V3–V6.</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-3 d-flex gap-2">
                            <button class="btn btn-primary" id="btnEvaluarOndas">Evaluar</button>
                            <button class="btn btn-outline-secondary" id="btnLimpiarOndas">Limpiar</button>
                        </div>

                        <div id="resultadoOndas" class="alert alert-info mt-3 d-none"></div>

                        <div class="mt-4">
                            <h6>Descripción textual adicional</h6>
                            <p class="mb-1"><strong>Onda P:</strong> despolarización auricular. Ausencia sugiere ritmos no sinusales; P alta (&gt;2.5 mm) sugiere dilatación AD; P ancha (&ge;120 ms) dilatación AI.</p>
                            <p class="mb-1"><strong>QRS:</strong> despolarización ventricular. QRS ancho (&ge;120 ms) se asocia a bloqueos de rama o ritmos ventriculares; morfología RBBB/LBBB guía localización del trastorno.</p>
                            <p class="mb-0"><strong>Onda T:</strong> repolarización ventricular. Inversiones o simetría marcada pueden sugerir isquemia aguda, alteraciones electrolíticas o efectos farmacológicos.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</main>

<footer class="container my-5">
    <div class="text-center text-muted small">
        Contenido educativo — No sustituye evaluación clínica. Autor: Dr. Luis Ángel Rueda Cuervo.
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // Cálculo del eje del QRS
    const btnCalcularEje = document.getElementById('btnCalcularEje');
    const btnLimpiarEje = document.getElementById('btnLimpiarEje');
    const resultadoEje = document.getElementById('resultadoEje');

    function clasificarEje(angle) {
        if (angle >= -30 && angle <= 90) return 'Normal';
        if (angle < -30 && angle >= -90) return 'Desviación izquierda';
        if (angle > 90 && angle <= 180) return 'Desviación derecha';
        if (angle < -90) return 'Eje extremo';
        return 'Indeterminado';
    }

    btnCalcularEje?.addEventListener('click', () => {
        const di = parseFloat(document.getElementById('ejeDI').value);
        const avf = parseFloat(document.getElementById('ejeAVF').value);

        if (isNaN(di) || isNaN(avf) || (di === 0 && avf === 0)) {
            resultadoEje.textContent = 'Ingresa valores válidos (DI y aVF no pueden ser ambos 0).';
            resultadoEje.classList.remove('d-none', 'alert-success');
            resultadoEje.classList.add('alert-danger');
            return;
        }

        let angle = Math.atan2(avf, di) * 180 / Math.PI;
        if (angle > 180) angle -= 360;
        if (angle <= -180) angle += 360;

        const angleRounded = Math.round(angle);
        const clase = clasificarEje(angleRounded);

        resultadoEje.innerHTML = 'Eje QRS aproximado: <strong>' + angleRounded + '°</strong> (' + clase + ').';
        resultadoEje.classList.remove('d-none', 'alert-danger');
        resultadoEje.classList.add('alert-info');
    });

    btnLimpiarEje?.addEventListener('click', () => {
        const ejeDI = document.getElementById('ejeDI');
        const ejeAVF = document.getElementById('ejeAVF');
        if (ejeDI) ejeDI.value = '';
        if (ejeAVF) ejeAVF.value = '';
        resultadoEje.textContent = '';
        resultadoEje.classList.add('d-none');
    });

    // Evaluación de ondas P/QRS/T
    const btnEvaluarOndas = document.getElementById('btnEvaluarOndas');
    const btnLimpiarOndas = document.getElementById('btnLimpiarOndas');
    const resultadoOndas = document.getElementById('resultadoOndas');

    btnEvaluarOndas?.addEventListener('click', () => {
        const conclusions = [];

        const pPresente = document.getElementById('pPresente')?.checked;
        const pDuracion = parseFloat(document.getElementById('pDuracion')?.value);
        const pAmplitud = parseFloat(document.getElementById('pAmplitud')?.value);

        if (!pPresente) conclusions.push('Ausencia de P: considerar ritmo no sinusal.');
        if (!isNaN(pDuracion) && pDuracion >= 120) conclusions.push('P ancha (≥120 ms): P mitrale / dilatación AI.');
        if (!isNaN(pAmplitud) && pAmplitud > 2.5) conclusions.push('P alta (>2.5 mm): P pulmonale / dilatación AD.');

        const qrsDuracion = parseFloat(document.getElementById('qrsDuracion')?.value);
        const rbbb = document.getElementById('rbbb')?.checked;
        const lbbb = document.getElementById('lbbb')?.checked;

        if (!isNaN(qrsDuracion)) {
            if (qrsDuracion >= 120) conclusions.push('QRS ancho (≥120 ms): posible bloqueo de rama / ritmo ventricular.');
            else conclusions.push('QRS estrecho (<120 ms): conducción supraventricular.');
        }
        if (rbbb) conclusions.push('Morfología compatible con BRD (RBBB).');
        if (lbbb) conclusions.push('Morfología compatible con BCRI (LBBB).');

        const tPolaridad = document.getElementById('tPolaridad')?.value;
        const tSimetria = document.getElementById('tSimetria')?.value;
        const tInvertida = document.getElementById('tInvertida')?.checked;

        if (tInvertida) conclusions.push('T invertidas: evaluar isquemia, repolarización secundaria, etc.');
        if (tSimetria === 'simetrica') conclusions.push('T simétricas: pueden sugerir isquemia aguda o hiperK.');
        if (tPolaridad === 'plana') conclusions.push('T plana/isoelectrica: inespecífica, valorar contexto clínico.');

        if (conclusions.length) {
            resultadoOndas.textContent = conclusions.join(' ');
            resultadoOndas.classList.remove('d-none', 'alert-danger');
            resultadoOndas.classList.add('alert-info');
        } else {
            resultadoOndas.textContent = 'Sin hallazgos patológicos evidentes según los valores ingresados.';
            resultadoOndas.classList.remove('d-none', 'alert-danger');
            resultadoOndas.classList.add('alert-success');
        }
    });

    btnLimpiarOndas?.addEventListener('click', () => {
        ['pDuracion','pAmplitud','qrsDuracion'].forEach(id => { const el = document.getElementById(id); if (el) el.value = ''; });
        ['pPresente','rbbb','lbbb','tInvertida'].forEach(id => { const el = document.getElementById(id); if (el) el.checked = false; });
        const tPolaridad = document.getElementById('tPolaridad');
        const tSimetria = document.getElementById('tSimetria');
        if (tPolaridad) tPolaridad.value = 'positiva';
        if (tSimetria) tSimetria.value = 'asimetrica';
        resultadoOndas.textContent = '';
        resultadoOndas.classList.add('d-none');
    });
});
</script>
<script src="app.js"></script>
</body>
</html>